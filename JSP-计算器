<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <title>简易计算器</title>
	<meta http-equiv="pragma" content="no-cache">
	<meta http-equiv="cache-control" content="no-cache">
	<meta http-equiv="expires" content="0">    
	<meta http-equiv="keywords" content="keyword1,keyword2,keyword3">
	<meta http-equiv="description" content="This is my page">
	<script type="text/javascript">
	function xxx(){
		document.forms["form"].param1.value="";
		document.forms["form"].param2.value="";
		document.forms["form"].result.value="";
	}
	</script>
  </head>
  
  <body>
  <%
  	String sp1=request.getParameter("param1");
  	String sp2=request.getParameter("param2");
  	String op=request.getParameter("op");
  	float fp1=0,fp2=0,result=0;
  	if((sp1!=null)&&(sp2!=null)){
  		if(!"".equals(sp1)&&!"".equals(sp2)){
		  	try{
		  		fp1=Float.parseFloat(sp1);
		  		fp2=Float.parseFloat(sp2);
		  		if(op.trim().equals("+"))
		  			result=fp1+fp2;
		  		else if(op.trim().equals("-"))
		  			result=fp1-fp2;
		  		else if(op.trim().equals("*"))
		  			result=fp1*fp2;
		  		if(op.trim().equals("/")){
		  			if(fp2==0)
		  				out.print("<script>alert('除数不能为0!');</script>");
		  			else
		  				result=fp1/fp2;
		  		}
		  		
		  	}
		  	catch(Exception e){
		  		out.print("<script>alert('输入数据不合法，不是数字!');</script>");
		  	}
	  	}
  	}
  %>
  <form action="task01.jsp" method="post" name="form">
  <table align="center" border="1" width="300" height="360" style="border-collapse: collapse;">
  	<caption>表格标题</caption>
  	<tr>
  		<td width="100">请输入第一个数:</td>
  		<td><input type="text" name="param1" value="<%=(sp1==null)?"":fp1%>"></td>
  	</tr>
  	<tr>
  		<td width="100">请选择运算方式:</td>
  		<td>
  			<select name="op">
  			    <option> + </option>
  			    <option> - </option>
  			    <option> * </option>
  			    <option> / </option>
  			</select>
  		</td>
  	</tr>
  	<tr>
  		<td>请输入第二个数:</td>
  		<td><input type="text" name="param2" value=<%=(sp2==null)?"":fp2%>></td>
  	</tr>
   	<tr>
  		<td colspan="2" align="center">
  			<input type="submit" value="计算"/>
  			<input type="button" value="重置" onclick="xxx()"/>
  		</td>
  	</tr>
  	<tr>
  		<td>计算结果:</td>
  		<td><input type="text" name="result" value="<%=(sp1==null)?"":result%>"/></td>
  	</tr>
  </table>
  </form>
  </body>
</html>
